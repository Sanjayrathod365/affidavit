"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/affidavit-templates/route";
exports.ids = ["app/api/affidavit-templates/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "@prisma/client/runtime/library":
/*!*************************************************!*\
  !*** external "@prisma/client/runtime/library" ***!
  \*************************************************/
/***/ ((module) => {

module.exports = import("@prisma/client/runtime/library");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faffidavit-templates%2Froute&page=%2Fapi%2Faffidavit-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faffidavit-templates%2Froute.ts&appDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faffidavit-templates%2Froute&page=%2Fapi%2Faffidavit-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faffidavit-templates%2Froute.ts&appDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sanjaysinhrathod_Downloads_affidavit_app_src_app_api_affidavit_templates_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/affidavit-templates/route.ts */ \"(rsc)/./src/app/api/affidavit-templates/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_sanjaysinhrathod_Downloads_affidavit_app_src_app_api_affidavit_templates_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_sanjaysinhrathod_Downloads_affidavit_app_src_app_api_affidavit_templates_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/affidavit-templates/route\",\n        pathname: \"/api/affidavit-templates\",\n        filename: \"route\",\n        bundlePath: \"app/api/affidavit-templates/route\"\n    },\n    resolvedPagePath: \"/Users/sanjaysinhrathod/Downloads/affidavit-app/src/app/api/affidavit-templates/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sanjaysinhrathod_Downloads_affidavit_app_src_app_api_affidavit_templates_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/affidavit-templates/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZmZpZGF2aXQtdGVtcGxhdGVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZmZpZGF2aXQtdGVtcGxhdGVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWZmaWRhdml0LXRlbXBsYXRlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNhbmpheXNpbmhyYXRob2QlMkZEb3dubG9hZHMlMkZhZmZpZGF2aXQtYXBwJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnNhbmpheXNpbmhyYXRob2QlMkZEb3dubG9hZHMlMkZhZmZpZGF2aXQtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmZmlkYXZpdC1hcHAvPzAxOTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3NhbmpheXNpbmhyYXRob2QvRG93bmxvYWRzL2FmZmlkYXZpdC1hcHAvc3JjL2FwcC9hcGkvYWZmaWRhdml0LXRlbXBsYXRlcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWZmaWRhdml0LXRlbXBsYXRlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FmZmlkYXZpdC10ZW1wbGF0ZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FmZmlkYXZpdC10ZW1wbGF0ZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2FuamF5c2luaHJhdGhvZC9Eb3dubG9hZHMvYWZmaWRhdml0LWFwcC9zcmMvYXBwL2FwaS9hZmZpZGF2aXQtdGVtcGxhdGVzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hZmZpZGF2aXQtdGVtcGxhdGVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faffidavit-templates%2Froute&page=%2Fapi%2Faffidavit-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faffidavit-templates%2Froute.ts&appDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/affidavit-templates/route.ts":
/*!**************************************************!*\
  !*** ./src/app/api/affidavit-templates/route.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/middleware/auth */ \"(rsc)/./src/lib/middleware/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @prisma/client/runtime/library */ \"@prisma/client/runtime/library\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/cache */ \"(rsc)/./node_modules/next/cache.js\");\n/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_8__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_3__]);\n_prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n// Force dynamic rendering and prevent caching\nconst dynamic = \"force-dynamic\";\n// Define UPLOAD_DIR near the top\nconst UPLOAD_DIR = path__WEBPACK_IMPORTED_MODULE_5___default().join(process.cwd(), \"public\", \"uploads\", \"templates\");\n// Define types for structure elements for better validation/parsing\nconst positionSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    x: zod__WEBPACK_IMPORTED_MODULE_9__.z.number().optional(),\n    y: zod__WEBPACK_IMPORTED_MODULE_9__.z.number().optional(),\n    page: zod__WEBPACK_IMPORTED_MODULE_9__.z.number().optional()\n});\nconst stylesSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    fontSize: zod__WEBPACK_IMPORTED_MODULE_9__.z.number().optional(),\n    fontWeight: zod__WEBPACK_IMPORTED_MODULE_9__.z.enum([\n        \"normal\",\n        \"bold\"\n    ]).optional(),\n    textAlign: zod__WEBPACK_IMPORTED_MODULE_9__.z.enum([\n        \"left\",\n        \"center\",\n        \"right\"\n    ]).optional(),\n    color: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().optional()\n});\nconst placeholderSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_9__.z.string(),\n    name: zod__WEBPACK_IMPORTED_MODULE_9__.z.string(),\n    description: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().optional(),\n    type: zod__WEBPACK_IMPORTED_MODULE_9__.z.enum([\n        \"text\",\n        \"date\",\n        \"checkbox\",\n        \"signature\"\n    ]),\n    defaultValue: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().optional(),\n    required: zod__WEBPACK_IMPORTED_MODULE_9__.z.boolean(),\n    position: positionSchema.optional(),\n    styles: stylesSchema.optional()\n});\nconst logoSizeSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    width: zod__WEBPACK_IMPORTED_MODULE_9__.z.number(),\n    height: zod__WEBPACK_IMPORTED_MODULE_9__.z.number()\n});\nconst logoSettingsSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    path: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().optional(),\n    position: positionSchema.optional(),\n    size: logoSizeSchema.optional()\n}).optional();\nconst textBlockSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_9__.z.string(),\n    content: zod__WEBPACK_IMPORTED_MODULE_9__.z.string(),\n    position: positionSchema,\n    styles: stylesSchema\n});\nconst signatureSettingsSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    enabled: zod__WEBPACK_IMPORTED_MODULE_9__.z.boolean(),\n    label: zod__WEBPACK_IMPORTED_MODULE_9__.z.string(),\n    position: zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n        x: zod__WEBPACK_IMPORTED_MODULE_9__.z.number(),\n        y: zod__WEBPACK_IMPORTED_MODULE_9__.z.number()\n    }).required()\n}).optional();\nconst documentSettingsSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    pageSize: zod__WEBPACK_IMPORTED_MODULE_9__.z.enum([\n        \"Letter\",\n        \"Legal\",\n        \"A4\"\n    ]).optional().default(\"Letter\"),\n    orientation: zod__WEBPACK_IMPORTED_MODULE_9__.z.enum([\n        \"portrait\",\n        \"landscape\"\n    ]).optional().default(\"portrait\")\n}).optional();\nconst structureSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    placeholders: zod__WEBPACK_IMPORTED_MODULE_9__.z.array(placeholderSchema).optional().default([]),\n    textBlocks: zod__WEBPACK_IMPORTED_MODULE_9__.z.array(textBlockSchema).optional().default([]),\n    signatureSettings: signatureSettingsSchema,\n    documentSettings: documentSettingsSchema,\n    header: zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n        text: zod__WEBPACK_IMPORTED_MODULE_9__.z.string()\n    }).optional(),\n    footer: zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n        text: zod__WEBPACK_IMPORTED_MODULE_9__.z.string()\n    }).optional(),\n    logoSettings: logoSettingsSchema\n});\nconst templateSchema = zod__WEBPACK_IMPORTED_MODULE_9__.z.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().min(1, \"Template name is required\"),\n    description: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().optional(),\n    structure: structureSchema,\n    logoPath: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().optional(),\n    fontFamily: zod__WEBPACK_IMPORTED_MODULE_9__.z.string().optional(),\n    fontSize: zod__WEBPACK_IMPORTED_MODULE_9__.z.number().optional()\n});\n// GET handler for the list (no ID)\nasync function handleGetList() {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_6__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_7__.authOptions);\n        if (!session?.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Fetch only active templates\n        const templates = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.affidavitTemplate.findMany({\n            where: {\n                isActive: true\n            },\n            orderBy: [\n                {\n                    name: \"asc\"\n                },\n                {\n                    version: \"desc\"\n                }\n            ]\n        });\n        console.log(\"Raw templates fetched from DB:\", JSON.stringify(templates, null, 2));\n        console.log(\"Active templates fetched successfully:\", templates.length);\n        // Map to format needed by frontend\n        const formattedTemplates = templates.map((t)=>({\n                id: t.id,\n                name: t.name,\n                description: t.description,\n                filePath: t.filePath,\n                bodyContent: t.bodyContent,\n                logoPath: t.logoPath,\n                structure: t.structure,\n                version: t.version,\n                createdAt: t.createdAt,\n                updatedAt: t.updatedAt\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(formattedTemplates);\n    } catch (error) {\n        console.error(\"Error fetching active templates:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch active templates\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Simplified GET handler - only handles the list\nasync function GET(req) {\n    // Always handle fetching the list\n    return handleGetList();\n}\n// POST handler updated for FormData and file upload\nasync function handleCreateTemplate(req) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_6__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_7__.authOptions);\n        if (!session?.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized - User ID missing\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"Processing template creation request\");\n        const formData = await req.formData();\n        const name = formData.get(\"name\");\n        const structureString = formData.get(\"structure\");\n        const baseTemplateFile = formData.get(\"baseTemplate\");\n        const logoPath = formData.get(\"logoPath\");\n        const description = formData.get(\"description\");\n        const bodyContent = formData.get(\"bodyContent\");\n        if (!name || !structureString) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields: name and structure.\"\n            }, {\n                status: 400\n            });\n        }\n        let parsedStructure;\n        try {\n            parsedStructure = JSON.parse(structureString);\n            const structureValidation = structureSchema.safeParse(parsedStructure);\n            if (!structureValidation.success) throw new Error(\"Invalid structure format\");\n            parsedStructure = structureValidation.data;\n        } catch (e) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Invalid structure format: ${e.message}`\n            }, {\n                status: 400\n            });\n        }\n        let filePath = null;\n        // Handle file upload if present\n        if (baseTemplateFile) {\n            if (baseTemplateFile.type !== \"application/pdf\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    data: null,\n                    error: \"Invalid file type. Only PDF is allowed.\"\n                }, {\n                    status: 400\n                });\n            }\n            // Wrap file operations in try-catch\n            try {\n                await ensureUploadDirExists();\n                const fileExtension = path__WEBPACK_IMPORTED_MODULE_5___default().extname(baseTemplateFile.name) || \".pdf\"; // Default to .pdf\n                const uniqueFilename = `${(0,uuid__WEBPACK_IMPORTED_MODULE_10__[\"default\"])()}${fileExtension}`;\n                const destinationPath = path__WEBPACK_IMPORTED_MODULE_5___default().join(UPLOAD_DIR, uniqueFilename);\n                filePath = `/uploads/templates/${uniqueFilename}`; // Path to store in DB\n                // Read file buffer and write to disk\n                const fileBuffer = Buffer.from(await baseTemplateFile.arrayBuffer());\n                await fs_promises__WEBPACK_IMPORTED_MODULE_4___default().writeFile(destinationPath, fileBuffer);\n                console.log(\"Base template file saved successfully:\", filePath);\n            } catch (uploadError) {\n                console.error(\"Error saving base template file during creation:\", uploadError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to save uploaded base template file.\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        const dataToCreate = {\n            name,\n            description: description ?? null,\n            logoPath: logoPath ?? null,\n            structure: parsedStructure,\n            bodyContent: bodyContent ?? null,\n            filePath: filePath,\n            isActive: true,\n            version: 1,\n            userId: session.user.id\n        };\n        // Log the data just before creating\n        console.log(\"Data being sent to prisma.create:\", JSON.stringify(dataToCreate, null, 2));\n        const newTemplate = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.affidavitTemplate.create({\n            data: dataToCreate\n        });\n        // Revalidate the path after successful creation\n        (0,next_cache__WEBPACK_IMPORTED_MODULE_8__.revalidatePath)(\"/affidavit-templates\");\n        console.log(\"Revalidated path: /affidavit-templates\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            data: newTemplate,\n            error: null\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        // Log the caught error object itself for more details\n        console.error(\"Caught error object during template creation:\", error);\n        console.error(\"Error creating template:\", error); // Keep original log\n        // Add specific Prisma error handling\n        if (error instanceof _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_3__.PrismaClientKnownRequestError) {\n            // Log specific Prisma error code\n            console.error(`Prisma Error Code: ${error.code}`);\n            // Potentially return a more specific error based on the code\n            if (error.code === \"P2002\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `Failed to create template: A template with this name/version might already exist.`\n                }, {\n                    status: 409\n                }); // 409 Conflict\n            }\n            // Add more specific checks if needed (e.g., P2003 for foreign key again, though unlikely now)\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Database error occurred: ${error.code}`\n            }, {\n                status: 500\n            });\n        }\n        // Handle other potential errors (like unexpected errors during data prep)\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create template due to an unexpected server error.\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT handler - updated for versioning\nasync function handleUpdateTemplate(req) {\n    const url = new URL(req.url);\n    const id = url.searchParams.get(\"id\"); // ID of the template being updated (the previous version)\n    if (!id) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Template ID is required for update.\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_6__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_7__.authOptions);\n        if (!session?.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(`Processing template update request for ID: ${id}`);\n        const formData = await req.formData();\n        const name = formData.get(\"name\");\n        const structureString = formData.get(\"structure\");\n        const baseTemplateFile = formData.get(\"baseTemplate\");\n        const logoPath = formData.get(\"logoPath\");\n        const description = formData.get(\"description\");\n        const bodyContent = formData.get(\"bodyContent\"); // Get bodyContent\n        // --- Basic Validation --- \n        if (!name || !structureString) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields: name and structure.\"\n            }, {\n                status: 400\n            });\n        }\n        let parsedStructure;\n        try {\n            parsedStructure = JSON.parse(structureString);\n            const structureValidation = structureSchema.safeParse(parsedStructure);\n            if (!structureValidation.success) throw new Error(\"Invalid structure format\");\n            parsedStructure = structureValidation.data;\n        } catch (e) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Invalid structure format: ${e.message}`\n            }, {\n                status: 400\n            });\n        }\n        // --- Fetch Previous Version --- \n        const previousVersion = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.affidavitTemplate.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!previousVersion) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Template with ID ${id} not found.`\n            }, {\n                status: 404\n            });\n        }\n        // --- Handle File Upload (If new file provided) --- \n        let newFilePath = null;\n        if (baseTemplateFile) {\n            if (baseTemplateFile.type !== \"application/pdf\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    data: null,\n                    error: \"Invalid file type. Only PDF is allowed.\"\n                }, {\n                    status: 400\n                });\n            }\n            try {\n                await ensureUploadDirExists();\n                const fileExtension = path__WEBPACK_IMPORTED_MODULE_5___default().extname(baseTemplateFile.name) || \".pdf\";\n                const uniqueFilename = `${(0,uuid__WEBPACK_IMPORTED_MODULE_10__[\"default\"])()}${fileExtension}`;\n                const destinationPath = path__WEBPACK_IMPORTED_MODULE_5___default().join(UPLOAD_DIR, uniqueFilename);\n                newFilePath = `/uploads/templates/${uniqueFilename}`;\n                const fileBuffer = Buffer.from(await baseTemplateFile.arrayBuffer());\n                await fs_promises__WEBPACK_IMPORTED_MODULE_4___default().writeFile(destinationPath, fileBuffer);\n                console.log(\"New base template file saved successfully:\", newFilePath);\n                // Optional: Delete old file if it exists and a new one is uploaded\n                if (previousVersion.filePath) {\n                    try {\n                        const oldPath = path__WEBPACK_IMPORTED_MODULE_5___default().join(process.cwd(), \"public\", previousVersion.filePath);\n                        await fs_promises__WEBPACK_IMPORTED_MODULE_4___default().unlink(oldPath);\n                        console.log(\"Old base template file deleted:\", oldPath);\n                    } catch (deleteError) {\n                        // Log error but don't fail the update if deletion fails\n                        console.warn(`Could not delete old file ${previousVersion.filePath}:`, deleteError.message);\n                    }\n                }\n            } catch (uploadError) {\n                console.error(\"Error saving new base template file during update:\", uploadError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to save uploaded base template file.\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // --- Transaction: Deactivate old, Create new --- \n        const [_, newTemplate] = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.$transaction([\n            // 1. Deactivate the previous version\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.affidavitTemplate.update({\n                where: {\n                    id: previousVersion.id\n                },\n                data: {\n                    isActive: false\n                }\n            }),\n            // 2. Create the new version\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.affidavitTemplate.create({\n                data: {\n                    name: name ?? previousVersion.name,\n                    description: description ?? previousVersion.description,\n                    logoPath: logoPath ?? previousVersion.logoPath,\n                    structure: parsedStructure,\n                    bodyContent: bodyContent ?? previousVersion.bodyContent,\n                    filePath: newFilePath ?? previousVersion.filePath,\n                    version: previousVersion.version + 1,\n                    isActive: true,\n                    userId: session.user.id\n                }\n            })\n        ]);\n        // Revalidate the path after successful update\n        (0,next_cache__WEBPACK_IMPORTED_MODULE_8__.revalidatePath)(\"/affidavit-templates\");\n        console.log(\"Revalidated path: /affidavit-templates\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            data: newTemplate,\n            error: null\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error updating template:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update template\"\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE handler (needs to extract ID from query param)\nasync function handleDeleteTemplate(req) {\n    const url = new URL(req.url);\n    const id = url.searchParams.get(\"id\"); // Get ID from query param\n    if (!id) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Template ID is required for deletion.\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_6__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_7__.authOptions);\n        if (!session?.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if template exists before deleting\n        const existingTemplate = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.affidavitTemplate.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!existingTemplate) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Template not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Perform deletion\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.affidavitTemplate.delete({\n            where: {\n                id\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Template deleted successfully\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error deleting template:\", error);\n        // Handle potential errors (e.g., related records constraint)\n        if (error instanceof _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_3__.PrismaClientKnownRequestError && error.code === \"P2003\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Cannot delete template: It might be linked to existing affidavits.\"\n            }, {\n                status: 409\n            }); // 409 Conflict\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to delete template\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Function to ensure upload directory exists\nconst ensureUploadDirExists = async ()=>{\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_4___default().access(UPLOAD_DIR);\n    } catch (error) {\n        // Directory does not exist, create it\n        await fs_promises__WEBPACK_IMPORTED_MODULE_4___default().mkdir(UPLOAD_DIR, {\n            recursive: true\n        });\n    }\n};\n// Export route handlers\nconst POST = (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__.withAuth)(handleCreateTemplate, [\n    \"ADMIN\",\n    \"SUPERVISOR\"\n]);\nconst PUT = (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__.withAuth)(handleUpdateTemplate, [\n    \"ADMIN\",\n    \"SUPERVISOR\"\n]); // Assuming PUT is for update\nconst DELETE = (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__.withAuth)(handleDeleteTemplate, [\n    \"ADMIN\",\n    \"SUPERVISOR\"\n]); // Assuming DELETE is for deletion \n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZmZpZGF2aXQtdGVtcGxhdGVzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ2hDO0FBQ3lCO0FBQ1g7QUFDeUM7QUFDbEQ7QUFDTDtBQUNZO0FBQ1M7QUFDSjtBQUNHO0FBRTVDLDhDQUE4QztBQUN2QyxNQUFNWSxVQUFVLGdCQUFnQjtBQUV2QyxpQ0FBaUM7QUFDakMsTUFBTUMsYUFBYVAsZ0RBQVMsQ0FBQ1MsUUFBUUMsR0FBRyxJQUFJLFVBQVUsV0FBVztBQUVqRSxvRUFBb0U7QUFDcEUsTUFBTUMsaUJBQWlCaEIsa0NBQUNBLENBQUNpQixNQUFNLENBQUM7SUFDOUJDLEdBQUdsQixrQ0FBQ0EsQ0FBQ21CLE1BQU0sR0FBR0MsUUFBUTtJQUN0QkMsR0FBR3JCLGtDQUFDQSxDQUFDbUIsTUFBTSxHQUFHQyxRQUFRO0lBQ3RCRSxNQUFNdEIsa0NBQUNBLENBQUNtQixNQUFNLEdBQUdDLFFBQVE7QUFDM0I7QUFFQSxNQUFNRyxlQUFldkIsa0NBQUNBLENBQUNpQixNQUFNLENBQUM7SUFDNUJPLFVBQVV4QixrQ0FBQ0EsQ0FBQ21CLE1BQU0sR0FBR0MsUUFBUTtJQUM3QkssWUFBWXpCLGtDQUFDQSxDQUFDMEIsSUFBSSxDQUFDO1FBQUM7UUFBVTtLQUFPLEVBQUVOLFFBQVE7SUFDL0NPLFdBQVczQixrQ0FBQ0EsQ0FBQzBCLElBQUksQ0FBQztRQUFDO1FBQVE7UUFBVTtLQUFRLEVBQUVOLFFBQVE7SUFDdkRRLE9BQU81QixrQ0FBQ0EsQ0FBQzZCLE1BQU0sR0FBR1QsUUFBUTtBQUM1QjtBQUVBLE1BQU1VLG9CQUFvQjlCLGtDQUFDQSxDQUFDaUIsTUFBTSxDQUFDO0lBQ2pDYyxJQUFJL0Isa0NBQUNBLENBQUM2QixNQUFNO0lBQ1pHLE1BQU1oQyxrQ0FBQ0EsQ0FBQzZCLE1BQU07SUFDZEksYUFBYWpDLGtDQUFDQSxDQUFDNkIsTUFBTSxHQUFHVCxRQUFRO0lBQ2hDYyxN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QUFFQyxRQUFRO1lBQUksSUFBSSxlQUFlO1FBQy9JO1FBQ0EsT0FBTzNFLHFEQUFZQSxDQUFDeUUsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBNEIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDakY7QUFDRjtBQUVBLDZDQUE2QztBQUM3QyxNQUFNb0Msd0JBQXdCO0lBQzVCLElBQUk7UUFDRixNQUFNMUcseURBQVMsQ0FBQ1E7SUFDbEIsRUFBRSxPQUFPNkQsT0FBTztRQUNkLHNDQUFzQztRQUN0QyxNQUFNckUsd0RBQVEsQ0FBQ1EsWUFBWTtZQUFFcUksV0FBVztRQUFLO0lBQy9DO0FBQ0Y7QUFFQSx3QkFBd0I7QUFDakIsTUFBTUMsT0FBT2pKLDhEQUFRQSxDQUFDK0Ysc0JBQXNCO0lBQUM7SUFBUztDQUFhLEVBQUU7QUFDckUsTUFBTW1ELE1BQU1sSiw4REFBUUEsQ0FBQzZILHNCQUFzQjtJQUFDO0lBQVM7Q0FBYSxFQUFFLENBQUMsNkJBQTZCO0FBQ2xHLE1BQU1zQixTQUFTbkosOERBQVFBLENBQUMySSxzQkFBc0I7SUFBQztJQUFTO0NBQWEsRUFBRSxDQUFDLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmZmlkYXZpdC1hcHAvLi9zcmMvYXBwL2FwaS9hZmZpZGF2aXQtdGVtcGxhdGVzL3JvdXRlLnRzPzdjNjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICdAL2xpYi9taWRkbGV3YXJlL2F1dGgnO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IFByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yIH0gZnJvbSAnQHByaXNtYS9jbGllbnQvcnVudGltZS9saWJyYXJ5JztcbmltcG9ydCBmcyBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcblxuLy8gRm9yY2UgZHluYW1pYyByZW5kZXJpbmcgYW5kIHByZXZlbnQgY2FjaGluZ1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbi8vIERlZmluZSBVUExPQURfRElSIG5lYXIgdGhlIHRvcFxuY29uc3QgVVBMT0FEX0RJUiA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ3VwbG9hZHMnLCAndGVtcGxhdGVzJyk7XG5cbi8vIERlZmluZSB0eXBlcyBmb3Igc3RydWN0dXJlIGVsZW1lbnRzIGZvciBiZXR0ZXIgdmFsaWRhdGlvbi9wYXJzaW5nXG5jb25zdCBwb3NpdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcbiAgeDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICB5OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIHBhZ2U6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbn0pO1xuXG5jb25zdCBzdHlsZXNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGZvbnRTaXplOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGZvbnRXZWlnaHQ6IHouZW51bShbJ25vcm1hbCcsICdib2xkJ10pLm9wdGlvbmFsKCksXG4gIHRleHRBbGlnbjogei5lbnVtKFsnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnXSkub3B0aW9uYWwoKSxcbiAgY29sb3I6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuXG5jb25zdCBwbGFjZWhvbGRlclNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIG5hbWU6IHouc3RyaW5nKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHR5cGU6IHouZW51bShbJ3RleHQnLCAnZGF0ZScsICdjaGVja2JveCcsICdzaWduYXR1cmUnXSksXG4gIGRlZmF1bHRWYWx1ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICByZXF1aXJlZDogei5ib29sZWFuKCksXG4gIHBvc2l0aW9uOiBwb3NpdGlvblNjaGVtYS5vcHRpb25hbCgpLFxuICBzdHlsZXM6IHN0eWxlc1NjaGVtYS5vcHRpb25hbCgpLFxufSk7XG5cbmNvbnN0IGxvZ29TaXplU2NoZW1hID0gei5vYmplY3Qoe1xuICB3aWR0aDogei5udW1iZXIoKSxcbiAgaGVpZ2h0OiB6Lm51bWJlcigpLFxufSk7XG5cbmNvbnN0IGxvZ29TZXR0aW5nc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgcGF0aDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBwb3NpdGlvbjogcG9zaXRpb25TY2hlbWEub3B0aW9uYWwoKSxcbiAgc2l6ZTogbG9nb1NpemVTY2hlbWEub3B0aW9uYWwoKSxcbn0pLm9wdGlvbmFsKCk7XG5cbmNvbnN0IHRleHRCbG9ja1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKCksXG4gIHBvc2l0aW9uOiBwb3NpdGlvblNjaGVtYSxcbiAgc3R5bGVzOiBzdHlsZXNTY2hlbWEsXG59KTtcblxuY29uc3Qgc2lnbmF0dXJlU2V0dGluZ3NTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVuYWJsZWQ6IHouYm9vbGVhbigpLFxuICBsYWJlbDogei5zdHJpbmcoKSxcbiAgcG9zaXRpb246IHoub2JqZWN0KHtcbiAgICB4OiB6Lm51bWJlcigpLFxuICAgIHk6IHoubnVtYmVyKCksXG4gIH0pLnJlcXVpcmVkKCksXG59KS5vcHRpb25hbCgpO1xuXG5jb25zdCBkb2N1bWVudFNldHRpbmdzU2NoZW1hID0gei5vYmplY3Qoe1xuICBwYWdlU2l6ZTogei5lbnVtKFsnTGV0dGVyJywgJ0xlZ2FsJywgJ0E0J10pLm9wdGlvbmFsKCkuZGVmYXVsdCgnTGV0dGVyJyksXG4gIG9yaWVudGF0aW9uOiB6LmVudW0oWydwb3J0cmFpdCcsICdsYW5kc2NhcGUnXSkub3B0aW9uYWwoKS5kZWZhdWx0KCdwb3J0cmFpdCcpLFxufSkub3B0aW9uYWwoKTtcblxuY29uc3Qgc3RydWN0dXJlU2NoZW1hID0gei5vYmplY3Qoe1xuICBwbGFjZWhvbGRlcnM6IHouYXJyYXkocGxhY2Vob2xkZXJTY2hlbWEpLm9wdGlvbmFsKCkuZGVmYXVsdChbXSksXG4gIHRleHRCbG9ja3M6IHouYXJyYXkodGV4dEJsb2NrU2NoZW1hKS5vcHRpb25hbCgpLmRlZmF1bHQoW10pLFxuICBzaWduYXR1cmVTZXR0aW5nczogc2lnbmF0dXJlU2V0dGluZ3NTY2hlbWEsXG4gIGRvY3VtZW50U2V0dGluZ3M6IGRvY3VtZW50U2V0dGluZ3NTY2hlbWEsXG4gIGhlYWRlcjogei5vYmplY3QoeyB0ZXh0OiB6LnN0cmluZygpIH0pLm9wdGlvbmFsKCksXG4gIGZvb3Rlcjogei5vYmplY3QoeyB0ZXh0OiB6LnN0cmluZygpIH0pLm9wdGlvbmFsKCksXG4gIGxvZ29TZXR0aW5nczogbG9nb1NldHRpbmdzU2NoZW1hLFxufSk7XG5cbmNvbnN0IHRlbXBsYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnVGVtcGxhdGUgbmFtZSBpcyByZXF1aXJlZCcpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzdHJ1Y3R1cmU6IHN0cnVjdHVyZVNjaGVtYSxcbiAgbG9nb1BhdGg6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZm9udEZhbWlseTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBmb250U2l6ZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxufSk7XG5cbi8vIEdFVCBoYW5kbGVyIGZvciB0aGUgbGlzdCAobm8gSUQpXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVHZXRMaXN0KCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICAvLyBGZXRjaCBvbmx5IGFjdGl2ZSB0ZW1wbGF0ZXNcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSBhd2FpdCBwcmlzbWEuYWZmaWRhdml0VGVtcGxhdGUuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgIG9yZGVyQnk6IFtcbiAgICAgICAgeyBuYW1lOiAnYXNjJyB9LFxuICAgICAgICB7IHZlcnNpb246ICdkZXNjJyB9XG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ1JhdyB0ZW1wbGF0ZXMgZmV0Y2hlZCBmcm9tIERCOicsIEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlcywgbnVsbCwgMikpO1xuICAgIGNvbnNvbGUubG9nKCdBY3RpdmUgdGVtcGxhdGVzIGZldGNoZWQgc3VjY2Vzc2Z1bGx5OicsIHRlbXBsYXRlcy5sZW5ndGgpO1xuICAgIFxuICAgIC8vIE1hcCB0byBmb3JtYXQgbmVlZGVkIGJ5IGZyb250ZW5kXG4gICAgY29uc3QgZm9ybWF0dGVkVGVtcGxhdGVzID0gdGVtcGxhdGVzLm1hcCgodCkgPT4gKHtcbiAgICAgIGlkOiB0LmlkLFxuICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IHQuZGVzY3JpcHRpb24sXG4gICAgICBmaWxlUGF0aDogdC5maWxlUGF0aCxcbiAgICAgIGJvZHlDb250ZW50OiB0LmJvZHlDb250ZW50LFxuICAgICAgbG9nb1BhdGg6IHQubG9nb1BhdGgsXG4gICAgICBzdHJ1Y3R1cmU6IHQuc3RydWN0dXJlLCBcbiAgICAgIHZlcnNpb246IHQudmVyc2lvbixcbiAgICAgIGNyZWF0ZWRBdDogdC5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IHQudXBkYXRlZEF0LFxuICAgIH0pKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihmb3JtYXR0ZWRUZW1wbGF0ZXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFjdGl2ZSB0ZW1wbGF0ZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggYWN0aXZlIHRlbXBsYXRlcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gU2ltcGxpZmllZCBHRVQgaGFuZGxlciAtIG9ubHkgaGFuZGxlcyB0aGUgbGlzdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIC8vIEFsd2F5cyBoYW5kbGUgZmV0Y2hpbmcgdGhlIGxpc3RcbiAgcmV0dXJuIGhhbmRsZUdldExpc3QoKTtcbn1cblxuLy8gUE9TVCBoYW5kbGVyIHVwZGF0ZWQgZm9yIEZvcm1EYXRhIGFuZCBmaWxlIHVwbG9hZFxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ3JlYXRlVGVtcGxhdGUocmVxOiBOZXh0UmVxdWVzdCk6IFByb21pc2U8TmV4dFJlc3BvbnNlPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkIC0gVXNlciBJRCBtaXNzaW5nJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nIHRlbXBsYXRlIGNyZWF0aW9uIHJlcXVlc3QnKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcS5mb3JtRGF0YSgpO1xuICAgIGNvbnN0IG5hbWUgPSBmb3JtRGF0YS5nZXQoJ25hbWUnKSBhcyBzdHJpbmcgfCBudWxsO1xuICAgIGNvbnN0IHN0cnVjdHVyZVN0cmluZyA9IGZvcm1EYXRhLmdldCgnc3RydWN0dXJlJykgYXMgc3RyaW5nIHwgbnVsbDtcbiAgICBjb25zdCBiYXNlVGVtcGxhdGVGaWxlID0gZm9ybURhdGEuZ2V0KCdiYXNlVGVtcGxhdGUnKSBhcyBGaWxlIHwgbnVsbDtcbiAgICBjb25zdCBsb2dvUGF0aCA9IGZvcm1EYXRhLmdldCgnbG9nb1BhdGgnKSBhcyBzdHJpbmcgfCBudWxsO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybURhdGEuZ2V0KCdkZXNjcmlwdGlvbicpIGFzIHN0cmluZyB8IG51bGw7XG4gICAgY29uc3QgYm9keUNvbnRlbnQgPSBmb3JtRGF0YS5nZXQoJ2JvZHlDb250ZW50JykgYXMgc3RyaW5nIHwgbnVsbDtcblxuICAgIGlmICghbmFtZSB8fCAhc3RydWN0dXJlU3RyaW5nKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBuYW1lIGFuZCBzdHJ1Y3R1cmUuJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgICBcbiAgICBsZXQgcGFyc2VkU3RydWN0dXJlOiBhbnk7XG4gICAgdHJ5IHtcbiAgICAgIHBhcnNlZFN0cnVjdHVyZSA9IEpTT04ucGFyc2Uoc3RydWN0dXJlU3RyaW5nKTtcbiAgICAgIGNvbnN0IHN0cnVjdHVyZVZhbGlkYXRpb24gPSBzdHJ1Y3R1cmVTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZFN0cnVjdHVyZSk7XG4gICAgICBpZiAoIXN0cnVjdHVyZVZhbGlkYXRpb24uc3VjY2VzcykgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cnVjdHVyZSBmb3JtYXQnKTtcbiAgICAgIHBhcnNlZFN0cnVjdHVyZSA9IHN0cnVjdHVyZVZhbGlkYXRpb24uZGF0YTtcbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBgSW52YWxpZCBzdHJ1Y3R1cmUgZm9ybWF0OiAke2UubWVzc2FnZX1gIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGZpbGVQYXRoOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIEhhbmRsZSBmaWxlIHVwbG9hZCBpZiBwcmVzZW50XG4gICAgaWYgKGJhc2VUZW1wbGF0ZUZpbGUpIHtcbiAgICAgIGlmIChiYXNlVGVtcGxhdGVGaWxlLnR5cGUgIT09ICdhcHBsaWNhdGlvbi9wZGYnKSB7XG4gICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkYXRhOiBudWxsLCBlcnJvcjogJ0ludmFsaWQgZmlsZSB0eXBlLiBPbmx5IFBERiBpcyBhbGxvd2VkLicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gV3JhcCBmaWxlIG9wZXJhdGlvbnMgaW4gdHJ5LWNhdGNoXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBlbnN1cmVVcGxvYWREaXJFeGlzdHMoKTtcbiAgICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IHBhdGguZXh0bmFtZShiYXNlVGVtcGxhdGVGaWxlLm5hbWUpIHx8ICcucGRmJzsgLy8gRGVmYXVsdCB0byAucGRmXG4gICAgICAgIGNvbnN0IHVuaXF1ZUZpbGVuYW1lID0gYCR7dXVpZHY0KCl9JHtmaWxlRXh0ZW5zaW9ufWA7XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uUGF0aCA9IHBhdGguam9pbihVUExPQURfRElSLCB1bmlxdWVGaWxlbmFtZSk7XG4gICAgICAgIGZpbGVQYXRoID0gYC91cGxvYWRzL3RlbXBsYXRlcy8ke3VuaXF1ZUZpbGVuYW1lfWA7IC8vIFBhdGggdG8gc3RvcmUgaW4gREJcblxuICAgICAgICAvLyBSZWFkIGZpbGUgYnVmZmVyIGFuZCB3cml0ZSB0byBkaXNrXG4gICAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSBCdWZmZXIuZnJvbShhd2FpdCBiYXNlVGVtcGxhdGVGaWxlLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICBhd2FpdCBmcy53cml0ZUZpbGUoZGVzdGluYXRpb25QYXRoLCBmaWxlQnVmZmVyKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0Jhc2UgdGVtcGxhdGUgZmlsZSBzYXZlZCBzdWNjZXNzZnVsbHk6JywgZmlsZVBhdGgpO1xuICAgICAgfSBjYXRjaCAodXBsb2FkRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGJhc2UgdGVtcGxhdGUgZmlsZSBkdXJpbmcgY3JlYXRpb246JywgdXBsb2FkRXJyb3IpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBzYXZlIHVwbG9hZGVkIGJhc2UgdGVtcGxhdGUgZmlsZS4nfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkYXRhVG9DcmVhdGUgPSB7XG4gICAgICBuYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uID8/IG51bGwsXG4gICAgICBsb2dvUGF0aDogbG9nb1BhdGggPz8gbnVsbCxcbiAgICAgIHN0cnVjdHVyZTogcGFyc2VkU3RydWN0dXJlLFxuICAgICAgYm9keUNvbnRlbnQ6IGJvZHlDb250ZW50ID8/IG51bGwsXG4gICAgICBmaWxlUGF0aDogZmlsZVBhdGgsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIHZlcnNpb246IDEsXG4gICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcbiAgICB9O1xuXG4gICAgLy8gTG9nIHRoZSBkYXRhIGp1c3QgYmVmb3JlIGNyZWF0aW5nXG4gICAgY29uc29sZS5sb2coJ0RhdGEgYmVpbmcgc2VudCB0byBwcmlzbWEuY3JlYXRlOicsIEpTT04uc3RyaW5naWZ5KGRhdGFUb0NyZWF0ZSwgbnVsbCwgMikpO1xuXG4gICAgY29uc3QgbmV3VGVtcGxhdGUgPSBhd2FpdCBwcmlzbWEuYWZmaWRhdml0VGVtcGxhdGUuY3JlYXRlKHsgZGF0YTogZGF0YVRvQ3JlYXRlIH0pO1xuXG4gICAgLy8gUmV2YWxpZGF0ZSB0aGUgcGF0aCBhZnRlciBzdWNjZXNzZnVsIGNyZWF0aW9uXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy9hZmZpZGF2aXQtdGVtcGxhdGVzJyk7XG4gICAgY29uc29sZS5sb2coJ1JldmFsaWRhdGVkIHBhdGg6IC9hZmZpZGF2aXQtdGVtcGxhdGVzJyk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkYXRhOiBuZXdUZW1wbGF0ZSwgZXJyb3I6IG51bGwgfSwgeyBzdGF0dXM6IDIwMSB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIExvZyB0aGUgY2F1Z2h0IGVycm9yIG9iamVjdCBpdHNlbGYgZm9yIG1vcmUgZGV0YWlsc1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NhdWdodCBlcnJvciBvYmplY3QgZHVyaW5nIHRlbXBsYXRlIGNyZWF0aW9uOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB0ZW1wbGF0ZTonLCBlcnJvcik7IC8vIEtlZXAgb3JpZ2luYWwgbG9nXG4gICAgLy8gQWRkIHNwZWNpZmljIFByaXNtYSBlcnJvciBoYW5kbGluZ1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yKSB7XG4gICAgICAvLyBMb2cgc3BlY2lmaWMgUHJpc21hIGVycm9yIGNvZGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFByaXNtYSBFcnJvciBDb2RlOiAke2Vycm9yLmNvZGV9YCk7XG4gICAgICAvLyBQb3RlbnRpYWxseSByZXR1cm4gYSBtb3JlIHNwZWNpZmljIGVycm9yIGJhc2VkIG9uIHRoZSBjb2RlXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1AyMDAyJykgeyAvLyBVbmlxdWUgY29uc3RyYWludCB2aW9sYXRpb25cbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogYEZhaWxlZCB0byBjcmVhdGUgdGVtcGxhdGU6IEEgdGVtcGxhdGUgd2l0aCB0aGlzIG5hbWUvdmVyc2lvbiBtaWdodCBhbHJlYWR5IGV4aXN0LmAgfSwgeyBzdGF0dXM6IDQwOSB9KTsgLy8gNDA5IENvbmZsaWN0XG4gICAgICB9IFxuICAgICAgLy8gQWRkIG1vcmUgc3BlY2lmaWMgY2hlY2tzIGlmIG5lZWRlZCAoZS5nLiwgUDIwMDMgZm9yIGZvcmVpZ24ga2V5IGFnYWluLCB0aG91Z2ggdW5saWtlbHkgbm93KVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGBEYXRhYmFzZSBlcnJvciBvY2N1cnJlZDogJHtlcnJvci5jb2RlfWAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9IFxuICAgIC8vIEhhbmRsZSBvdGhlciBwb3RlbnRpYWwgZXJyb3JzIChsaWtlIHVuZXhwZWN0ZWQgZXJyb3JzIGR1cmluZyBkYXRhIHByZXApXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHRlbXBsYXRlIGR1ZSB0byBhbiB1bmV4cGVjdGVkIHNlcnZlciBlcnJvci4nIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuLy8gUFVUIGhhbmRsZXIgLSB1cGRhdGVkIGZvciB2ZXJzaW9uaW5nXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVVcGRhdGVUZW1wbGF0ZShyZXE6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U+IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgIGNvbnN0IGlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2lkJyk7IC8vIElEIG9mIHRoZSB0ZW1wbGF0ZSBiZWluZyB1cGRhdGVkICh0aGUgcHJldmlvdXMgdmVyc2lvbilcblxuICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdUZW1wbGF0ZSBJRCBpcyByZXF1aXJlZCBmb3IgdXBkYXRlLicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gICAgICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgdGVtcGxhdGUgdXBkYXRlIHJlcXVlc3QgZm9yIElEOiAke2lkfWApO1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcS5mb3JtRGF0YSgpO1xuICAgICAgICBjb25zdCBuYW1lID0gZm9ybURhdGEuZ2V0KCduYW1lJykgYXMgc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlU3RyaW5nID0gZm9ybURhdGEuZ2V0KCdzdHJ1Y3R1cmUnKSBhcyBzdHJpbmcgfCBudWxsO1xuICAgICAgICBjb25zdCBiYXNlVGVtcGxhdGVGaWxlID0gZm9ybURhdGEuZ2V0KCdiYXNlVGVtcGxhdGUnKSBhcyBGaWxlIHwgbnVsbDtcbiAgICAgICAgY29uc3QgbG9nb1BhdGggPSBmb3JtRGF0YS5nZXQoJ2xvZ29QYXRoJykgYXMgc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBmb3JtRGF0YS5nZXQoJ2Rlc2NyaXB0aW9uJykgYXMgc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSBmb3JtRGF0YS5nZXQoJ2JvZHlDb250ZW50JykgYXMgc3RyaW5nIHwgbnVsbDsgLy8gR2V0IGJvZHlDb250ZW50XG5cbiAgICAgICAgLy8gLS0tIEJhc2ljIFZhbGlkYXRpb24gLS0tIFxuICAgICAgICBpZiAoIW5hbWUgfHwgIXN0cnVjdHVyZVN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogbmFtZSBhbmQgc3RydWN0dXJlLicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IHBhcnNlZFN0cnVjdHVyZTogYW55O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyc2VkU3RydWN0dXJlID0gSlNPTi5wYXJzZShzdHJ1Y3R1cmVTdHJpbmcpO1xuICAgICAgICAgICAgY29uc3Qgc3RydWN0dXJlVmFsaWRhdGlvbiA9IHN0cnVjdHVyZVNjaGVtYS5zYWZlUGFyc2UocGFyc2VkU3RydWN0dXJlKTtcbiAgICAgICAgICAgIGlmICghc3RydWN0dXJlVmFsaWRhdGlvbi5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RydWN0dXJlIGZvcm1hdCcpO1xuICAgICAgICAgICAgcGFyc2VkU3RydWN0dXJlID0gc3RydWN0dXJlVmFsaWRhdGlvbi5kYXRhO1xuICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBgSW52YWxpZCBzdHJ1Y3R1cmUgZm9ybWF0OiAke2UubWVzc2FnZX1gIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gRmV0Y2ggUHJldmlvdXMgVmVyc2lvbiAtLS0gXG4gICAgICAgIGNvbnN0IHByZXZpb3VzVmVyc2lvbiA9IGF3YWl0IHByaXNtYS5hZmZpZGF2aXRUZW1wbGF0ZS5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcHJldmlvdXNWZXJzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogYFRlbXBsYXRlIHdpdGggSUQgJHtpZH0gbm90IGZvdW5kLmAgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBIYW5kbGUgRmlsZSBVcGxvYWQgKElmIG5ldyBmaWxlIHByb3ZpZGVkKSAtLS0gXG4gICAgICAgIGxldCBuZXdGaWxlUGF0aDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGlmIChiYXNlVGVtcGxhdGVGaWxlKSB7XG4gICAgICAgICAgIGlmIChiYXNlVGVtcGxhdGVGaWxlLnR5cGUgIT09ICdhcHBsaWNhdGlvbi9wZGYnKSB7XG4gICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGRhdGE6IG51bGwsIGVycm9yOiAnSW52YWxpZCBmaWxlIHR5cGUuIE9ubHkgUERGIGlzIGFsbG93ZWQuJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IGVuc3VyZVVwbG9hZERpckV4aXN0cygpO1xuICAgICAgICAgICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gcGF0aC5leHRuYW1lKGJhc2VUZW1wbGF0ZUZpbGUubmFtZSkgfHwgJy5wZGYnO1xuICAgICAgICAgICAgICBjb25zdCB1bmlxdWVGaWxlbmFtZSA9IGAke3V1aWR2NCgpfSR7ZmlsZUV4dGVuc2lvbn1gO1xuICAgICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvblBhdGggPSBwYXRoLmpvaW4oVVBMT0FEX0RJUiwgdW5pcXVlRmlsZW5hbWUpO1xuICAgICAgICAgICAgICBuZXdGaWxlUGF0aCA9IGAvdXBsb2Fkcy90ZW1wbGF0ZXMvJHt1bmlxdWVGaWxlbmFtZX1gO1xuXG4gICAgICAgICAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSBCdWZmZXIuZnJvbShhd2FpdCBiYXNlVGVtcGxhdGVGaWxlLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICAgICAgICBhd2FpdCBmcy53cml0ZUZpbGUoZGVzdGluYXRpb25QYXRoLCBmaWxlQnVmZmVyKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05ldyBiYXNlIHRlbXBsYXRlIGZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5OicsIG5ld0ZpbGVQYXRoKTtcblxuICAgICAgICAgICAgICAvLyBPcHRpb25hbDogRGVsZXRlIG9sZCBmaWxlIGlmIGl0IGV4aXN0cyBhbmQgYSBuZXcgb25lIGlzIHVwbG9hZGVkXG4gICAgICAgICAgICAgIGlmIChwcmV2aW91c1ZlcnNpb24uZmlsZVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgcHJldmlvdXNWZXJzaW9uLmZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZnMudW5saW5rKG9sZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnT2xkIGJhc2UgdGVtcGxhdGUgZmlsZSBkZWxldGVkOicsIG9sZFBhdGgpO1xuICAgICAgICAgICAgICAgICB9IGNhdGNoIChkZWxldGVFcnJvcjogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciBidXQgZG9uJ3QgZmFpbCB0aGUgdXBkYXRlIGlmIGRlbGV0aW9uIGZhaWxzXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IGRlbGV0ZSBvbGQgZmlsZSAke3ByZXZpb3VzVmVyc2lvbi5maWxlUGF0aH06YCwgZGVsZXRlRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9IGNhdGNoICh1cGxvYWRFcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgbmV3IGJhc2UgdGVtcGxhdGUgZmlsZSBkdXJpbmcgdXBkYXRlOicsIHVwbG9hZEVycm9yKTtcbiAgICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gc2F2ZSB1cGxvYWRlZCBiYXNlIHRlbXBsYXRlIGZpbGUuJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gVHJhbnNhY3Rpb246IERlYWN0aXZhdGUgb2xkLCBDcmVhdGUgbmV3IC0tLSBcbiAgICAgICAgY29uc3QgW18sIG5ld1RlbXBsYXRlXSA9IGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oW1xuICAgICAgICAgICAgLy8gMS4gRGVhY3RpdmF0ZSB0aGUgcHJldmlvdXMgdmVyc2lvblxuICAgICAgICAgICAgcHJpc21hLmFmZmlkYXZpdFRlbXBsYXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHByZXZpb3VzVmVyc2lvbi5pZCB9LFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaXNBY3RpdmU6IGZhbHNlIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC8vIDIuIENyZWF0ZSB0aGUgbmV3IHZlcnNpb25cbiAgICAgICAgICAgIHByaXNtYS5hZmZpZGF2aXRUZW1wbGF0ZS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBwcmV2aW91c1ZlcnNpb24ubmFtZSwgLy8gVXNlIG5ldyBuYW1lIG9yIGtlZXAgb2xkXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiA/PyBwcmV2aW91c1ZlcnNpb24uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIGxvZ29QYXRoOiBsb2dvUGF0aCA/PyBwcmV2aW91c1ZlcnNpb24ubG9nb1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIHN0cnVjdHVyZTogcGFyc2VkU3RydWN0dXJlLCAvLyBBbHdheXMgdXNlIHRoZSBuZXcgc3RydWN0dXJlIGZyb20gdGhlIGZvcm1cbiAgICAgICAgICAgICAgICAgICAgYm9keUNvbnRlbnQ6IGJvZHlDb250ZW50ID8/IHByZXZpb3VzVmVyc2lvbi5ib2R5Q29udGVudCwgLy8gSW5jbHVkZSBib2R5Q29udGVudFxuICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aDogbmV3RmlsZVBhdGggPz8gcHJldmlvdXNWZXJzaW9uLmZpbGVQYXRoLCAvLyBVc2UgbmV3IGZpbGUgcGF0aCBvciBrZWVwIG9sZCBvbmVcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogcHJldmlvdXNWZXJzaW9uLnZlcnNpb24gKyAxLFxuICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsIC8vIEFzc29jaWF0ZSB3aXRoIHRoZSBjdXJyZW50IHVzZXJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIFJldmFsaWRhdGUgdGhlIHBhdGggYWZ0ZXIgc3VjY2Vzc2Z1bCB1cGRhdGVcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9hZmZpZGF2aXQtdGVtcGxhdGVzJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXZhbGlkYXRlZCBwYXRoOiAvYWZmaWRhdml0LXRlbXBsYXRlcycpO1xuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGRhdGE6IG5ld1RlbXBsYXRlLCBlcnJvcjogbnVsbCB9LCB7IHN0YXR1czogMjAwIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdGVtcGxhdGU6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgdGVtcGxhdGUnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxufVxuXG4vLyBERUxFVEUgaGFuZGxlciAobmVlZHMgdG8gZXh0cmFjdCBJRCBmcm9tIHF1ZXJ5IHBhcmFtKVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlRGVsZXRlVGVtcGxhdGUocmVxOiBOZXh0UmVxdWVzdCk6IFByb21pc2U8TmV4dFJlc3BvbnNlPiB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gIGNvbnN0IGlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2lkJyk7IC8vIEdldCBJRCBmcm9tIHF1ZXJ5IHBhcmFtXG5cbiAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdUZW1wbGF0ZSBJRCBpcyByZXF1aXJlZCBmb3IgZGVsZXRpb24uJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmlkKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRlbXBsYXRlIGV4aXN0cyBiZWZvcmUgZGVsZXRpbmdcbiAgICBjb25zdCBleGlzdGluZ1RlbXBsYXRlID0gYXdhaXQgcHJpc21hLmFmZmlkYXZpdFRlbXBsYXRlLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICAgIGlmICghZXhpc3RpbmdUZW1wbGF0ZSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1RlbXBsYXRlIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIGRlbGV0aW9uXG4gICAgYXdhaXQgcHJpc21hLmFmZmlkYXZpdFRlbXBsYXRlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnVGVtcGxhdGUgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyB0ZW1wbGF0ZTonLCBlcnJvcik7XG4gICAgLy8gSGFuZGxlIHBvdGVudGlhbCBlcnJvcnMgKGUuZy4sIHJlbGF0ZWQgcmVjb3JkcyBjb25zdHJhaW50KVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yICYmIGVycm9yLmNvZGUgPT09ICdQMjAwMycpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdDYW5ub3QgZGVsZXRlIHRlbXBsYXRlOiBJdCBtaWdodCBiZSBsaW5rZWQgdG8gZXhpc3RpbmcgYWZmaWRhdml0cy4nIH0sIHsgc3RhdHVzOiA0MDkgfSk7IC8vIDQwOSBDb25mbGljdFxuICAgIH1cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgdGVtcGxhdGUnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gZW5zdXJlIHVwbG9hZCBkaXJlY3RvcnkgZXhpc3RzXG5jb25zdCBlbnN1cmVVcGxvYWREaXJFeGlzdHMgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZnMuYWNjZXNzKFVQTE9BRF9ESVIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIERpcmVjdG9yeSBkb2VzIG5vdCBleGlzdCwgY3JlYXRlIGl0XG4gICAgYXdhaXQgZnMubWtkaXIoVVBMT0FEX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIH1cbn07XG5cbi8vIEV4cG9ydCByb3V0ZSBoYW5kbGVyc1xuZXhwb3J0IGNvbnN0IFBPU1QgPSB3aXRoQXV0aChoYW5kbGVDcmVhdGVUZW1wbGF0ZSwgW1wiQURNSU5cIiwgXCJTVVBFUlZJU09SXCJdKTtcbmV4cG9ydCBjb25zdCBQVVQgPSB3aXRoQXV0aChoYW5kbGVVcGRhdGVUZW1wbGF0ZSwgW1wiQURNSU5cIiwgXCJTVVBFUlZJU09SXCJdKTsgLy8gQXNzdW1pbmcgUFVUIGlzIGZvciB1cGRhdGVcbmV4cG9ydCBjb25zdCBERUxFVEUgPSB3aXRoQXV0aChoYW5kbGVEZWxldGVUZW1wbGF0ZSwgW1wiQURNSU5cIiwgXCJTVVBFUlZJU09SXCJdKTsgLy8gQXNzdW1pbmcgREVMRVRFIGlzIGZvciBkZWxldGlvbiAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwieiIsIndpdGhBdXRoIiwicHJpc21hIiwiUHJpc21hQ2xpZW50S25vd25SZXF1ZXN0RXJyb3IiLCJmcyIsInBhdGgiLCJ2NCIsInV1aWR2NCIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsInJldmFsaWRhdGVQYXRoIiwiZHluYW1pYyIsIlVQTE9BRF9ESVIiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsInBvc2l0aW9uU2NoZW1hIiwib2JqZWN0IiwieCIsIm51bWJlciIsIm9wdGlvbmFsIiwieSIsInBhZ2UiLCJzdHlsZXNTY2hlbWEiLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJlbnVtIiwidGV4dEFsaWduIiwiY29sb3IiLCJzdHJpbmciLCJwbGFjZWhvbGRlclNjaGVtYSIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsInJlcXVpcmVkIiwiYm9vbGVhbiIsInBvc2l0aW9uIiwic3R5bGVzIiwibG9nb1NpemVTY2hlbWEiLCJ3aWR0aCIsImhlaWdodCIsImxvZ29TZXR0aW5nc1NjaGVtYSIsInNpemUiLCJ0ZXh0QmxvY2tTY2hlbWEiLCJjb250ZW50Iiwic2lnbmF0dXJlU2V0dGluZ3NTY2hlbWEiLCJlbmFibGVkIiwibGFiZWwiLCJkb2N1bWVudFNldHRpbmdzU2NoZW1hIiwicGFnZVNpemUiLCJkZWZhdWx0Iiwib3JpZW50YXRpb24iLCJzdHJ1Y3R1cmVTY2hlbWEiLCJwbGFjZWhvbGRlcnMiLCJhcnJheSIsInRleHRCbG9ja3MiLCJzaWduYXR1cmVTZXR0aW5ncyIsImRvY3VtZW50U2V0dGluZ3MiLCJoZWFkZXIiLCJ0ZXh0IiwiZm9vdGVyIiwibG9nb1NldHRpbmdzIiwidGVtcGxhdGVTY2hlbWEiLCJtaW4iLCJzdHJ1Y3R1cmUiLCJsb2dvUGF0aCIsImZvbnRGYW1pbHkiLCJoYW5kbGVHZXRMaXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJ0ZW1wbGF0ZXMiLCJhZmZpZGF2aXRUZW1wbGF0ZSIsImZpbmRNYW55Iiwid2hlcmUiLCJpc0FjdGl2ZSIsIm9yZGVyQnkiLCJ2ZXJzaW9uIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJsZW5ndGgiLCJmb3JtYXR0ZWRUZW1wbGF0ZXMiLCJtYXAiLCJ0IiwiZmlsZVBhdGgiLCJib2R5Q29udGVudCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIkdFVCIsInJlcSIsImhhbmRsZUNyZWF0ZVRlbXBsYXRlIiwiZm9ybURhdGEiLCJnZXQiLCJzdHJ1Y3R1cmVTdHJpbmciLCJiYXNlVGVtcGxhdGVGaWxlIiwicGFyc2VkU3RydWN0dXJlIiwicGFyc2UiLCJzdHJ1Y3R1cmVWYWxpZGF0aW9uIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsIkVycm9yIiwiZGF0YSIsImUiLCJtZXNzYWdlIiwiZW5zdXJlVXBsb2FkRGlyRXhpc3RzIiwiZmlsZUV4dGVuc2lvbiIsImV4dG5hbWUiLCJ1bmlxdWVGaWxlbmFtZSIsImRlc3RpbmF0aW9uUGF0aCIsImZpbGVCdWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwiYXJyYXlCdWZmZXIiLCJ3cml0ZUZpbGUiLCJ1cGxvYWRFcnJvciIsImRhdGFUb0NyZWF0ZSIsInVzZXJJZCIsIm5ld1RlbXBsYXRlIiwiY3JlYXRlIiwiY29kZSIsImhhbmRsZVVwZGF0ZVRlbXBsYXRlIiwidXJsIiwiVVJMIiwic2VhcmNoUGFyYW1zIiwicHJldmlvdXNWZXJzaW9uIiwiZmluZFVuaXF1ZSIsIm5ld0ZpbGVQYXRoIiwib2xkUGF0aCIsInVubGluayIsImRlbGV0ZUVycm9yIiwid2FybiIsIl8iLCIkdHJhbnNhY3Rpb24iLCJ1cGRhdGUiLCJoYW5kbGVEZWxldGVUZW1wbGF0ZSIsImV4aXN0aW5nVGVtcGxhdGUiLCJkZWxldGUiLCJhY2Nlc3MiLCJta2RpciIsInJlY3Vyc2l2ZSIsIlBPU1QiLCJQVVQiLCJERUxFVEUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/affidavit-templates/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                console.log(`[Auth Attempt] Email: ${credentials?.email}`);\n                if (!credentials?.email || !credentials?.password) {\n                    console.error(\"[Auth Error] Missing email or password\");\n                    return null;\n                }\n                try {\n                    // 1. Find user by email in the database\n                    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                        where: {\n                            email: credentials.email\n                        }\n                    });\n                    if (!user) {\n                        console.error(`[Auth Error] No user found: ${credentials.email}`);\n                        return null; // User not found\n                    }\n                    // Log the ID found in the database\n                    console.log(`[Auth Check] User found in DB. ID: ${user.id}, Email: ${user.email}`);\n                    // Add check for null email\n                    if (!user.email) {\n                        console.error(`[Auth Error] User record email is null: ${credentials.email}`);\n                        return null; // Cannot authenticate user without an email\n                    }\n                    // 2. Check if user has a password set in the DB\n                    if (!user.password) {\n                        console.error(`[Auth Error] User password is null: ${credentials.email}`);\n                        return null;\n                    }\n                    // 3. Compare provided password with hashed password in DB\n                    const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compare(credentials.password, user.password // Safe now because we checked for null above\n                    );\n                    if (!isPasswordValid) {\n                        console.error(`[Auth Error] Invalid password for: ${credentials.email}`);\n                        return null; // Passwords don't match\n                    }\n                    // 4. Check if user has a role assigned\n                    if (!user.role) {\n                        console.error(`[Auth Error] User role is null: ${credentials.email}`);\n                        return null; // Role is required\n                    }\n                    // 5. Passwords match & role exists - return user object with DB data\n                    const userToReturn = {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name ?? \"\",\n                        role: user.role\n                    };\n                    // Log the object being returned\n                    console.log(`[Auth Success] Returning user object:`, JSON.stringify(userToReturn));\n                    return userToReturn;\n                } catch (error) {\n                    console.error(\"[Auth Error] Exception during authorization:\", error);\n                    return null; // Return null on any error\n                }\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                if (token.id) {\n                    session.user.id = token.id;\n                }\n                if (token.role) {\n                    session.user.role = token.role;\n                }\n            }\n            return session;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVDLEtBQUssRUFBRWhCLElBQUksRUFBRTtZQUN2QixJQUFJQSxNQUFNO2dCQUNSZ0IsTUFBTWIsRUFBRSxHQUFHSCxLQUFLRyxFQUFFO2dCQUNsQmEsTUFBTVYsSUFBSSxHQUFHTixLQUFLTSxJQUFJO1lBQ3hCO1lBQ0EsT0FBT1U7UUFDVDtRQUNBLE1BQU1KLFNBQVEsRUFBRUEsT0FBTyxFQUFFSSxLQUFLLEVBQUU7WUFDOUIsSUFBSUosUUFBUVosSUFBSSxFQUFFO2dCQUNoQixJQUFJZ0IsTUFBTWIsRUFBRSxFQUFFO29CQUFFUyxRQUFRWixJQUFJLENBQUNHLEVBQUUsR0FBR2EsTUFBTWIsRUFBRTtnQkFBWTtnQkFDdEQsSUFBSWEsTUFBTVYsSUFBSSxFQUFFO29CQUFFTSxRQUFRWixJQUFJLENBQUNNLElBQUksR0FBR1UsTUFBTVYsSUFBSTtnQkFBWTtZQUM5RDtZQUNBLE9BQU9NO1FBQ1Q7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZmZpZGF2aXQtYXBwLy4vc3JjL2xpYi9hdXRoLnRzPzY2OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5cbmRlY2xhcmUgbW9kdWxlICduZXh0LWF1dGgnIHtcbiAgaW50ZXJmYWNlIFVzZXIge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcm9sZTogc3RyaW5nO1xuICB9XG4gIGludGVyZmFjZSBTZXNzaW9uIHtcbiAgICAgIHVzZXI6IFVzZXI7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ0NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFtBdXRoIEF0dGVtcHRdIEVtYWlsOiAke2NyZWRlbnRpYWxzPy5lbWFpbH1gKTtcblxuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy5lbWFpbCB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW0F1dGggRXJyb3JdIE1pc3NpbmcgZW1haWwgb3IgcGFzc3dvcmRcIik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gMS4gRmluZCB1c2VyIGJ5IGVtYWlsIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCB9LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbQXV0aCBFcnJvcl0gTm8gdXNlciBmb3VuZDogJHtjcmVkZW50aWFscy5lbWFpbH1gKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBVc2VyIG5vdCBmb3VuZFxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBMb2cgdGhlIElEIGZvdW5kIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbQXV0aCBDaGVja10gVXNlciBmb3VuZCBpbiBEQi4gSUQ6ICR7dXNlci5pZH0sIEVtYWlsOiAke3VzZXIuZW1haWx9YCk7XG5cbiAgICAgICAgICAvLyBBZGQgY2hlY2sgZm9yIG51bGwgZW1haWxcbiAgICAgICAgICBpZiAoIXVzZXIuZW1haWwpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0F1dGggRXJyb3JdIFVzZXIgcmVjb3JkIGVtYWlsIGlzIG51bGw6ICR7Y3JlZGVudGlhbHMuZW1haWx9YCk7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBDYW5ub3QgYXV0aGVudGljYXRlIHVzZXIgd2l0aG91dCBhbiBlbWFpbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIDIuIENoZWNrIGlmIHVzZXIgaGFzIGEgcGFzc3dvcmQgc2V0IGluIHRoZSBEQlxuICAgICAgICAgIGlmICghdXNlci5wYXNzd29yZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0F1dGggRXJyb3JdIFVzZXIgcGFzc3dvcmQgaXMgbnVsbDogJHtjcmVkZW50aWFscy5lbWFpbH1gKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyBcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyAzLiBDb21wYXJlIHByb3ZpZGVkIHBhc3N3b3JkIHdpdGggaGFzaGVkIHBhc3N3b3JkIGluIERCXG4gICAgICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoXG4gICAgICAgICAgICBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgICAgICAgICAgIHVzZXIucGFzc3dvcmQgLy8gU2FmZSBub3cgYmVjYXVzZSB3ZSBjaGVja2VkIGZvciBudWxsIGFib3ZlXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbQXV0aCBFcnJvcl0gSW52YWxpZCBwYXNzd29yZCBmb3I6ICR7Y3JlZGVudGlhbHMuZW1haWx9YCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gUGFzc3dvcmRzIGRvbid0IG1hdGNoXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gNC4gQ2hlY2sgaWYgdXNlciBoYXMgYSByb2xlIGFzc2lnbmVkXG4gICAgICAgICAgaWYgKCF1c2VyLnJvbGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0F1dGggRXJyb3JdIFVzZXIgcm9sZSBpcyBudWxsOiAke2NyZWRlbnRpYWxzLmVtYWlsfWApO1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gUm9sZSBpcyByZXF1aXJlZFxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIDUuIFBhc3N3b3JkcyBtYXRjaCAmIHJvbGUgZXhpc3RzIC0gcmV0dXJuIHVzZXIgb2JqZWN0IHdpdGggREIgZGF0YVxuICAgICAgICAgIGNvbnN0IHVzZXJUb1JldHVybiA9IHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLCBcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lID8/ICcnLFxuICAgICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBMb2cgdGhlIG9iamVjdCBiZWluZyByZXR1cm5lZFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbQXV0aCBTdWNjZXNzXSBSZXR1cm5pbmcgdXNlciBvYmplY3Q6YCwgSlNPTi5zdHJpbmdpZnkodXNlclRvUmV0dXJuKSk7IFxuXG4gICAgICAgICAgcmV0dXJuIHVzZXJUb1JldHVybjtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbQXV0aCBFcnJvcl0gRXhjZXB0aW9uIGR1cmluZyBhdXRob3JpemF0aW9uOlwiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIG9uIGFueSBlcnJvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxuICB9LFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xuICAgICAgaWYgKHNlc3Npb24udXNlcikge1xuICAgICAgICBpZiAodG9rZW4uaWQpIHsgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nOyB9XG4gICAgICAgIGlmICh0b2tlbi5yb2xlKSB7IHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZSBhcyBzdHJpbmc7IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gIH0sXG59OyAiXSwibmFtZXMiOlsiQ3JlZGVudGlhbHNQcm92aWRlciIsInByaXNtYSIsImJjcnlwdCIsImF1dGhPcHRpb25zIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJyb2xlIiwidXNlclRvUmV0dXJuIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhZ2VzIiwic2lnbkluIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/middleware/auth.ts":
/*!************************************!*\
  !*** ./src/lib/middleware/auth.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateRequestBody: () => (/* binding */ validateRequestBody),\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/jwt */ \"(rsc)/./node_modules/next-auth/jwt/index.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/api */ \"(rsc)/./src/lib/utils/api.ts\");\n\n\n\nfunction isError(error) {\n    return error instanceof Error;\n}\nconst withAuth = (handler, allowedRoles = [\n    \"*\"\n])=>{\n    return async (request, context)=>{\n        try {\n            const token = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.getToken)({\n                req: request\n            });\n            if (!token) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Unauthorized\"\n                }, {\n                    status: 401\n                });\n            }\n            if (allowedRoles[0] !== \"*\" && !allowedRoles.includes(token.role)) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Forbidden\"\n                }, {\n                    status: 403\n                });\n            }\n            return handler(request, context);\n        } catch (err) {\n            console.error(\"Auth middleware error:\", isError(err) ? err.message : \"Unknown error\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Internal server error\"\n            }, {\n                status: 500\n            });\n        }\n    };\n};\nfunction validateRequestBody(data, validator) {\n    try {\n        return validator(data);\n    } catch (error) {\n        throw (0,_utils_api__WEBPACK_IMPORTED_MODULE_2__.createApiError)(`Invalid request body: ${error.message}`, 400);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21pZGRsZXdhcmUvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0Q7QUFDZjtBQUNLO0FBUzlDLFNBQVNHLFFBQVFDLEtBQWM7SUFDN0IsT0FBT0EsaUJBQWlCQztBQUMxQjtBQUVPLE1BQU1DLFdBQVcsQ0FBQ0MsU0FBdUJDLGVBQXlCO0lBQUM7Q0FBSTtJQUM1RSxPQUFPLE9BQU9DLFNBQXNCQztRQUNsQyxJQUFJO1lBQ0YsTUFBTUMsUUFBUSxNQUFNVix1REFBUUEsQ0FBQztnQkFBRVcsS0FBS0g7WUFBUTtZQUU1QyxJQUFJLENBQUNFLE9BQU87Z0JBQ1YsT0FBT1gscURBQVlBLENBQUNhLElBQUksQ0FDdEI7b0JBQUVULE9BQU87Z0JBQWUsR0FDeEI7b0JBQUVVLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxJQUFJTixZQUFZLENBQUMsRUFBRSxLQUFLLE9BQU8sQ0FBQ0EsYUFBYU8sUUFBUSxDQUFDSixNQUFNSyxJQUFJLEdBQWE7Z0JBQzNFLE9BQU9oQixxREFBWUEsQ0FBQ2EsSUFBSSxDQUN0QjtvQkFBRVQsT0FBTztnQkFBWSxHQUNyQjtvQkFBRVUsUUFBUTtnQkFBSTtZQUVsQjtZQUVBLE9BQU9QLFFBQVFFLFNBQVNDO1FBQzFCLEVBQUUsT0FBT08sS0FBSztZQUNaQyxRQUFRZCxLQUFLLENBQUMsMEJBQTBCRCxRQUFRYyxPQUFPQSxJQUFJRSxPQUFPLEdBQUc7WUFDckUsT0FBT25CLHFEQUFZQSxDQUFDYSxJQUFJLENBQ3RCO2dCQUFFVCxPQUFPO1lBQXdCLEdBQ2pDO2dCQUFFVSxRQUFRO1lBQUk7UUFFbEI7SUFDRjtBQUNGLEVBQUU7QUFFSyxTQUFTTSxvQkFDZEMsSUFBYSxFQUNiQyxTQUErQjtJQUUvQixJQUFJO1FBQ0YsT0FBT0EsVUFBVUQ7SUFDbkIsRUFBRSxPQUFPakIsT0FBTztRQUNkLE1BQU1GLDBEQUFjQSxDQUFDLENBQUMsc0JBQXNCLEVBQUVFLE1BQU1lLE9BQU8sQ0FBQyxDQUFDLEVBQUU7SUFDakU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FmZmlkYXZpdC1hcHAvLi9zcmMvbGliL21pZGRsZXdhcmUvYXV0aC50cz8xYTVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ25leHQtYXV0aC9qd3QnO1xuaW1wb3J0IHsgY3JlYXRlQXBpRXJyb3IgfSBmcm9tICcuLi91dGlscy9hcGknO1xuXG5leHBvcnQgdHlwZSBBdXRob3JpemVkUm9sZXMgPSAnQURNSU4nIHwgJ1BST1ZJREVSJyB8ICdTVEFGRicgfCAnKic7XG5cbnR5cGUgUm91dGVIYW5kbGVyID0gKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgY29udGV4dDogeyBwYXJhbXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gfVxuKSA9PiBQcm9taXNlPE5leHRSZXNwb25zZT47XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBFcnJvciB7XG4gIHJldHVybiBlcnJvciBpbnN0YW5jZW9mIEVycm9yO1xufVxuXG5leHBvcnQgY29uc3Qgd2l0aEF1dGggPSAoaGFuZGxlcjogUm91dGVIYW5kbGVyLCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdID0gWycqJ10pID0+IHtcbiAgcmV0dXJuIGFzeW5jIChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgY29udGV4dDogeyBwYXJhbXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gfSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFRva2VuKHsgcmVxOiByZXF1ZXN0IH0pO1xuICAgICAgXG4gICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWxsb3dlZFJvbGVzWzBdICE9PSAnKicgJiYgIWFsbG93ZWRSb2xlcy5pbmNsdWRlcyh0b2tlbi5yb2xlIGFzIHN0cmluZykpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdGb3JiaWRkZW4nIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoYW5kbGVyKHJlcXVlc3QsIGNvbnRleHQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignQXV0aCBtaWRkbGV3YXJlIGVycm9yOicsIGlzRXJyb3IoZXJyKSA/IGVyci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlcXVlc3RCb2R5PFQ+KFxuICBkYXRhOiB1bmtub3duLFxuICB2YWxpZGF0b3I6IChkYXRhOiB1bmtub3duKSA9PiBUXG4pOiBUIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdmFsaWRhdG9yKGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IGNyZWF0ZUFwaUVycm9yKGBJbnZhbGlkIHJlcXVlc3QgYm9keTogJHtlcnJvci5tZXNzYWdlfWAsIDQwMCk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFRva2VuIiwiY3JlYXRlQXBpRXJyb3IiLCJpc0Vycm9yIiwiZXJyb3IiLCJFcnJvciIsIndpdGhBdXRoIiwiaGFuZGxlciIsImFsbG93ZWRSb2xlcyIsInJlcXVlc3QiLCJjb250ZXh0IiwidG9rZW4iLCJyZXEiLCJqc29uIiwic3RhdHVzIiwiaW5jbHVkZXMiLCJyb2xlIiwiZXJyIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJ2YWxpZGF0ZVJlcXVlc3RCb2R5IiwiZGF0YSIsInZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/middleware/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRztBQUVuRSxJQUFJSSxJQUF5QixFQUFjO0lBQ3pDSCxnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZmZpZGF2aXQtYXBwLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xufSAiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils/api.ts":
/*!******************************!*\
  !*** ./src/lib/utils/api.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiError: () => (/* binding */ ApiError),\n/* harmony export */   createApiError: () => (/* binding */ createApiError),\n/* harmony export */   handleApiResponse: () => (/* binding */ handleApiResponse),\n/* harmony export */   isApiError: () => (/* binding */ isApiError)\n/* harmony export */ });\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logger */ \"(rsc)/./src/lib/utils/logger.ts\");\n\nclass ApiError extends Error {\n    constructor(message, statusCode = 500, data = null){\n        super(message);\n        this.statusCode = statusCode;\n        this.data = data;\n        this.name = \"ApiError\";\n    }\n}\nasync function handleApiResponse(promise, errorMessage = \"An error occurred\") {\n    try {\n        const data = await promise;\n        return {\n            data,\n            error: null\n        };\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(errorMessage, error);\n        return {\n            data: null,\n            error: error instanceof Error ? error.message : errorMessage\n        };\n    }\n}\nfunction isApiError(error) {\n    return error instanceof ApiError;\n}\nfunction createApiError(message, statusCode = 500, data = null) {\n    return new ApiError(message, statusCode, data);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3V0aWxzL2FwaS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE4QjtBQU92QixNQUFNQyxpQkFBaUJDO0lBQzVCQyxZQUNFQyxPQUFlLEVBQ2YsYUFBNEIsR0FBRyxFQUMvQixPQUFtQixJQUFJLENBQ3ZCO1FBQ0EsS0FBSyxDQUFDQTthQUhDQyxhQUFBQTthQUNBQyxPQUFBQTtRQUdQLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLGVBQWVDLGtCQUNwQkMsT0FBbUIsRUFDbkJDLGVBQXVCLG1CQUFtQjtJQUUxQyxJQUFJO1FBQ0YsTUFBTUosT0FBTyxNQUFNRztRQUNuQixPQUFPO1lBQUVIO1lBQU1LLE9BQU87UUFBSztJQUM3QixFQUFFLE9BQU9BLE9BQU87UUFDZFgsK0NBQU1BLENBQUNXLEtBQUssQ0FBQ0QsY0FBY0M7UUFDM0IsT0FBTztZQUNMTCxNQUFNO1lBQ05LLE9BQU9BLGlCQUFpQlQsUUFBUVMsTUFBTVAsT0FBTyxHQUFHTTtRQUNsRDtJQUNGO0FBQ0Y7QUFFTyxTQUFTRSxXQUFXRCxLQUFVO0lBQ25DLE9BQU9BLGlCQUFpQlY7QUFDMUI7QUFFTyxTQUFTWSxlQUNkVCxPQUFlLEVBQ2ZDLGFBQXFCLEdBQUcsRUFDeEJDLE9BQVksSUFBSTtJQUVoQixPQUFPLElBQUlMLFNBQVNHLFNBQVNDLFlBQVlDO0FBQzNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZmaWRhdml0LWFwcC8uL3NyYy9saWIvdXRpbHMvYXBpLnRzP2IwMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICcuL2xvZ2dlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpUmVzcG9uc2U8VD4ge1xuICBkYXRhOiBUIHwgbnVsbDtcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBjbGFzcyBBcGlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIHB1YmxpYyBzdGF0dXNDb2RlOiBudW1iZXIgPSA1MDAsXG4gICAgcHVibGljIGRhdGE6IGFueSA9IG51bGxcbiAgKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0FwaUVycm9yJztcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQXBpUmVzcG9uc2U8VD4oXG4gIHByb21pc2U6IFByb21pc2U8VD4sXG4gIGVycm9yTWVzc2FnZTogc3RyaW5nID0gJ0FuIGVycm9yIG9jY3VycmVkJ1xuKTogUHJvbWlzZTxBcGlSZXNwb25zZTxUPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwcm9taXNlO1xuICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yTWVzc2FnZSwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3JNZXNzYWdlXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBcGlFcnJvcihlcnJvcjogYW55KTogZXJyb3IgaXMgQXBpRXJyb3Ige1xuICByZXR1cm4gZXJyb3IgaW5zdGFuY2VvZiBBcGlFcnJvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFwaUVycm9yKFxuICBtZXNzYWdlOiBzdHJpbmcsXG4gIHN0YXR1c0NvZGU6IG51bWJlciA9IDUwMCxcbiAgZGF0YTogYW55ID0gbnVsbFxuKTogQXBpRXJyb3Ige1xuICByZXR1cm4gbmV3IEFwaUVycm9yKG1lc3NhZ2UsIHN0YXR1c0NvZGUsIGRhdGEpO1xufSAiXSwibmFtZXMiOlsibG9nZ2VyIiwiQXBpRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJkYXRhIiwibmFtZSIsImhhbmRsZUFwaVJlc3BvbnNlIiwicHJvbWlzZSIsImVycm9yTWVzc2FnZSIsImVycm9yIiwiaXNBcGlFcnJvciIsImNyZWF0ZUFwaUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils/api.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils/logger.ts":
/*!*********************************!*\
  !*** ./src/lib/utils/logger.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! winston */ \"(rsc)/./node_modules/winston/lib/winston.js\");\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(winston__WEBPACK_IMPORTED_MODULE_0__);\n\nconst logger = winston__WEBPACK_IMPORTED_MODULE_0___default().createLogger({\n    level: process.env.LOG_LEVEL || \"info\",\n    format: winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.timestamp(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.json()),\n    transports: [\n        new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).Console({\n            format: winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.colorize(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.simple())\n        }),\n        new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n            filename: \"error.log\",\n            level: \"error\"\n        }),\n        new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n            filename: \"combined.log\"\n        })\n    ]\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3V0aWxzL2xvZ2dlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEI7QUFFOUIsTUFBTUMsU0FBU0QsMkRBQW9CLENBQUM7SUFDbENHLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsU0FBUyxJQUFJO0lBQ2hDQyxRQUFRUCxxREFBYyxDQUFDUSxPQUFPLENBQzVCUixxREFBYyxDQUFDUyxTQUFTLElBQ3hCVCxxREFBYyxDQUFDVSxJQUFJO0lBRXJCQyxZQUFZO1FBQ1YsSUFBSVgsMkRBQWtCLENBQUNZLE9BQU8sQ0FBQztZQUM3QkwsUUFBUVAscURBQWMsQ0FBQ1EsT0FBTyxDQUM1QlIscURBQWMsQ0FBQ2EsUUFBUSxJQUN2QmIscURBQWMsQ0FBQ2MsTUFBTTtRQUV6QjtRQUNBLElBQUlkLDJEQUFrQixDQUFDZSxJQUFJLENBQUM7WUFBRUMsVUFBVTtZQUFhYixPQUFPO1FBQVE7UUFDcEUsSUFBSUgsMkRBQWtCLENBQUNlLElBQUksQ0FBQztZQUFFQyxVQUFVO1FBQWU7S0FDeEQ7QUFDSDtBQUVBLGlFQUFlZixNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZmaWRhdml0LWFwcC8uL3NyYy9saWIvdXRpbHMvbG9nZ2VyLnRzPzIwZjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHdpbnN0b24gZnJvbSAnd2luc3Rvbic7XG5cbmNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgbGV2ZWw6IHByb2Nlc3MuZW52LkxPR19MRVZFTCB8fCAnaW5mbycsXG4gIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICB3aW5zdG9uLmZvcm1hdC50aW1lc3RhbXAoKSxcbiAgICB3aW5zdG9uLmZvcm1hdC5qc29uKClcbiAgKSxcbiAgdHJhbnNwb3J0czogW1xuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuQ29uc29sZSh7XG4gICAgICBmb3JtYXQ6IHdpbnN0b24uZm9ybWF0LmNvbWJpbmUoXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LmNvbG9yaXplKCksXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LnNpbXBsZSgpXG4gICAgICApLFxuICAgIH0pLFxuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnZXJyb3IubG9nJywgbGV2ZWw6ICdlcnJvcicgfSksXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdjb21iaW5lZC5sb2cnIH0pLFxuICBdLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjsgIl0sIm5hbWVzIjpbIndpbnN0b24iLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsInByb2Nlc3MiLCJlbnYiLCJMT0dfTEVWRUwiLCJmb3JtYXQiLCJjb21iaW5lIiwidGltZXN0YW1wIiwianNvbiIsInRyYW5zcG9ydHMiLCJDb25zb2xlIiwiY29sb3JpemUiLCJzaW1wbGUiLCJGaWxlIiwiZmlsZW5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils/logger.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/lru-cache","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/winston","vendor-chunks/winston-transport","vendor-chunks/async","vendor-chunks/logform","vendor-chunks/color-convert","vendor-chunks/safe-stable-stringify","vendor-chunks/@colors","vendor-chunks/fecha","vendor-chunks/color","vendor-chunks/string_decoder","vendor-chunks/@dabh","vendor-chunks/color-string","vendor-chunks/color-name","vendor-chunks/stack-trace","vendor-chunks/triple-beam","vendor-chunks/ms","vendor-chunks/kuler","vendor-chunks/safe-buffer","vendor-chunks/one-time","vendor-chunks/inherits","vendor-chunks/fn.name","vendor-chunks/enabled","vendor-chunks/colorspace","vendor-chunks/is-stream","vendor-chunks/simple-swizzle","vendor-chunks/text-hex","vendor-chunks/is-arrayish","vendor-chunks/util-deprecate","vendor-chunks/uuid","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faffidavit-templates%2Froute&page=%2Fapi%2Faffidavit-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faffidavit-templates%2Froute.ts&appDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsanjaysinhrathod%2FDownloads%2Faffidavit-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();